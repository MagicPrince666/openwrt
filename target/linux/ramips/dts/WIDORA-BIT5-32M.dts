/dts-v1/;

#include "WIDORA-NEO.dtsi"

/ {
	compatible = "widora,bit5-32m", "widora,neo", "mediatek,mt7628an-soc";
	model = "Widora-BIT5 (32M)";

	chosen {
		bootargs = "console=ttyS0,115200";
	};

	memory@0 {
		device_type = "memory";
		reg = <0x0 0x4000000>;
	};

	pinctrl {
		state_default: pinctrl0 {
			gpio {
				ralink,group = "gpio";
				ralink,function = "gpio";
			};
			perst {
				ralink,group = "perst";
				ralink,function = "gpio";
			};
			refclk {
				ralink,group = "refclk";
				ralink,function = "gpio";
			};
			i2s {
				ralink,group = "i2s";
				ralink,function = "i2s";
			};
			spis {
				ralink,group = "spis";
				ralink,function = "gpio";
			};
			wled_an {
				ralink,group = "wled_an";
				ralink,function = "wled_an";
			};
			ephy_p1 {
				ralink,group = "ephy_p1";
				ralink,function = "gpio";
			};
			ephy_p2 {
				ralink,group = "ephy_p2";
				ralink,function = "gpio";
			};
			ephy_p3 {
				ralink,group = "ephy_p3";
				ralink,function = "gpio";
			};
			ephy_p4 {
				ralink,group = "ephy_p4";
				ralink,function = "gpio";
			};
			wdt {
				ralink,group = "wdt";
				ralink,function = "gpio";
			};
		};
	};

	ethernet@10100000 {
		mtd-mac-address = <&factory 0x28>;
	};

	sdhci@10130000 {
		status = "okay";
		mediatek,cd-low;
	};

	gpio-keys-polled {
			compatible = "gpio-keys-polled";
			#address-cells = <1>;
			#size-cells = <0>;
			poll-interval = <20>;
			wps {
				label = "reset";
				gpios = <&gpio1 6 1>;
				linux,code = <0x211>;
			};
	};
};

&spi0 {
	status = "okay";

	pinctrl-names = "default";
	pinctrl-0 = <&spi_pins>, <&spi_cs1_pins>;

	m25p80@0 {
		compatible = "jedec,spi-nor";
		reg = <0>;
		spi-max-frequency = <40000000>;

		partitions {
			compatible = "fixed-partitions";
			#address-cells = <1>;
			#size-cells = <1>;

			partition@0 {
				label = "u-boot";
				reg = <0x0 0x30000>;
				read-only;
			};

			partition@30000 {
				label = "u-boot-env";
				reg = <0x30000 0x10000>;
			};

			factory: partition@40000 {
				label = "factory";
				reg = <0x40000 0x10000>;
				read-only;
			};

			partition@50000 {
				compatible = "denx,uimage";
				label = "firmware";
				reg = <0x50000 0x1fb0000>;
			};
		};
	};

	spidev@1 {
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "rohm,dh2228fv";
		reg = <1>;
		spi-max-frequency = <40000000>;
	};
};

&i2c {
	status = "okay";
};

&uart1 {
	status = "okay";
};

&pwm {
	status = "okay";
};
